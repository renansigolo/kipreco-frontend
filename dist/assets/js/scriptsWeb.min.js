//Inicia o modulo do Dashboard em Angular
var app = angular.module('app', ['ui.router']);

console.log(`Angular Module Initialized`);

// //Declara os modulos dos controllers do Login
app.controller('LoginController', loginController);
app.controller('SignupController', signupController);
app.controller('HomeController', homeController);
app.controller('ProductsController', productsController);

//Declara as configuracoes das Rotas
app.config(routes);

//Configuracao das rotas
function routes($stateProvider, $urlRouterProvider) {

  $stateProvider.state('login', {
    templateUrl: 'templates/login.html',
    controller: 'LoginController',
    url: '/login'
  });

  $stateProvider.state('signup', {
    templateUrl: 'templates/signup.html',
    controller: 'SignupController',
    url: '/signup'
  });

  $stateProvider.state('home', {
    templateUrl: 'templates/home.html',
    controller: 'HomeController',
    url: '/home'
  });

  $stateProvider.state('products', {
    templateUrl: 'templates/products.html',
    controller: 'ProductsController',
    url: '/products'
  });

  $urlRouterProvider.otherwise('/login');
}

function homeController($scope, $state, $window, $http) {

  console.log('Home Controller Initialized');

  $scope.mercados = {};

  $scope.mercados = [{
    "nome": "Carrefour Express",
    "endereco": "Alameda Santos, 1787 - Bela Vista, São Paulo - SP, 01407-200",
    "logo": "http://via.placeholder.com/200x200",
    "numeroDePromocoes": "10",
    "produtos": [{
        "id": 1,
        "nome": "Arroz longo fino Tipo 1 Camil",
        "preco_antigo": "14,32",
        "preco_novo": "9,32",
        "img": "url",
        "link_detalhe": ""
      },
      {
        "id": 2,
        "nome": "Filé de peito de frango kg",
        "preco_antigo": "15,90",
        "preco_novo": "11,90",
        "img": "url",
        "link_detalhe": ""
      }
    ]
  }, {
    "nome": "Pão de Acúcar",
    "endereco": "R. Abílio Soares, 386 - Paraíso, São Paulo - SP, 04005-001",
    "horario_func": "Aberto:  07:00–23:00",
    "telefone": "+55 11 3057-1122",
    "logo": "http://via.placeholder.com/200x200",
    "numeroDePromocoes": "14",
    "produtos": [{
        "id": 1,
        "nome": "Arroz longo fino Tipo 1 Camil",
        "preco_antigo": "14,32",
        "preco_novo": "9,32",
        "img": "url",
        "link_detalhe": ""
      },
      {
        "id": 2,
        "nome": "Filé de peito de frango kg",
        "preco_antigo": "15,90",
        "preco_novo": "11,90",
        "img": "url",
        "link_detalhe": ""
      }
    ]
  }, {
    "nome": "Mini Mercado Extra",
    "endereco": "R. Pamplona, 1451 - Jardim Paulista, São Paulo - SP, 01405-001",
    "horario_func": "Aberto:  07:00–22:00",
    "telefone": "+55 (11) 3552-6284",
    "logo": "http://via.placeholder.com/200x200",
    "numeroDePromocoes": "134",
    "produtos": [{
        "id": 1,
        "nome": "Arroz longo fino Tipo 1 Camil",
        "preco_antigo": "14,32",
        "preco_novo": "9,32",
        "img": "url",
        "link_detalhe": ""
      },
      {
        "id": 2,
        "nome": "Filé de peito de frango kg",
        "preco_antigo": "15,90",
        "preco_novo": "11,90",
        "img": "url",
        "link_detalhe": ""
      }
    ],
  }]

}

function loginController($scope, $state, $window, $http) {

  console.log('Login Controller Initialized');

  $scope.data = {};
  $scope.meuPost = meuPost;

  var api = $http.get('http://localhost:3003').then(successCallback, errorCallback);

  function successCallback(retorno) {
    $scope.data.email = retorno.data.email;
    $scope.data.pass = retorno.data.pass;
  }

  function errorCallback() {
    console.log('OPs');
  }

  function meuPost() {
    $http.post('http://localhost:3003/', $scope.data).then(successCallback, errorCallback);

    function successCallback(data) {
      $state.go('home');
      console.log('FUNCIONOUUUU!');
      console.log(data);
    }

    function errorCallback() {
      console.log('AHHRRRR OPs');

    }
  }

}

// Server adress http://54.232.215.109:3000

function productsController($scope, $state, $window, $http) {

  console.log('Products Controller Initialized');
  $scope.produtos = {};

  $scope.produtos = [{
    "mercado": "Carrefour Express",
    "endereco": "Alameda Santos, 1787 - Bela Vista, São Paulo - SP, 01407-200",
    "itens": [{
        "id": 1,
        "nome": "Arroz longo fino Tipo 1 Camil",
        "preco_antigo": "14,32",
        "preco_novo": "9,32",
        "img": "http://via.placeholder.com/200x200",
      },
      {
        "id": 2,
        "nome": "Filé de peito de frango kg",
        "preco_antigo": "15,90",
        "preco_novo": "11,90",
        "img": "http://via.placeholder.com/200x200",
      },
      {
        "id": 3,
        "nome": "Batata doce rosada kg",
        "preco_antigo": "3,99",
        "preco_novo": "2,32",
        "img": "http://via.placeholder.com/200x200",
      },
      {
        "id": 4,
        "nome": "Maminha extralimpa KG",
        "preco_antigo": "34,50",
        "preco_novo": "24,90",
        "img": "http://via.placeholder.com/200x200",
      },
      {
        "id": 5,
        "nome": "Achocolatado Nescau 400g",
        "preco_antigo": "6,92",
        "preco_novo": "4,35",
        "img": "http://via.placeholder.com/200x200",
      },
      {
        "id": 6,
        "nome": "Açúcar refinado União 1kg",
        "preco_antigo": "2,92",
        "preco_novo": "2,15",
        "img": "http://via.placeholder.com/200x200",
      },
    ]
  }]

}

function signupController($scope, $state, $window, $http) {

  console.log('Signup Controller Initialized');

}

//# sourceMappingURL=scriptsWeb.min.js.map
